(function(){require(["https://wac.A8B5.edgecastcdn.net/80A8B5/static-assets/assets/workspaces/extensions/fork_workspace/html/fork_action.html-035f75c44653edcf62093b8bfaecf6e5.js","https://wac.A8B5.edgecastcdn.net/80A8B5/static-assets/assets/workspaces/extensions/fork_workspace/html/fork_dialog.html-3c95d985330db1d20e229867f975c7ba.js"],function(e,r){var t,a,s,n,o,i,c,d,u,l,p;return t=require("utils/AppInit"),n=require("command/CommandManager"),o=require("command/Commands"),d=require("command/Menus"),i=require("widgets/Dialogs"),c=require("utils/ExtensionUtils"),u=require("workspace-editor/workspace/Workspace"),c.addLinkedStyleSheet("https://wac.A8B5.edgecastcdn.net/80A8B5/static-assets/assets/workspaces/extensions/fork_workspace/fork_workspace-1f229d9a9c251c1188af58f22f15833c.css"),a="workspace.forkWorkspace",s="workspace.showForkWorkspaceDialog",o.FORK_WORKSPACE=a,o.SHOW_FORK_WORKSPACE_DIALOG=s,p=function(e){var t,a,s,n;return s=Mustache.render(r,u.getMetadata()),t=i.showModalDialogUsingTemplate(s),a=t.getElement(),n=a.find("#workspace-title-input"),t.done(function(e){var r,t;return e===i.DIALOG_BTN_OK?(r=null!=(t=u.getMetadata().hostedId)?t:u.getMetadata().id,l(n.val(),r)):void 0}),null!=e?e.preventDefault():void 0},l=function(e,r){var t;return t={workspace:{title:e,forked_workspace_id:r}},$.ajax({url:"/workspaces",type:"POST",dataType:"json",contentType:"application/json",processData:!1,data:JSON.stringify(t),success:function(e){return window.location="/workspaces/"+e.workspace.id},error:function(){return alert("There was a problem forking this workspace.")}})},t.htmlReady(function(){var r,t;return t=$(e),t.on("click",p),$("ul.util-actions").prepend(t),r=$("meta[name='csrf-token']").attr("content"),$.ajaxSetup({beforeSend:function(e){return e.setRequestHeader("X-CSRF-Token",r)}})}),n.register("Fork Workspace",o.FORK_WORKSPACE,l),n.register("Fork Workspace",o.SHOW_FORK_WORKSPACE_DIALOG,p),d.getMenu(d.AppMenuBar.FILE_MENU).addMenuItem(o.SHOW_FORK_WORKSPACE_DIALOG)})}).call(this),function(){require(["https://wac.A8B5.edgecastcdn.net/80A8B5/static-assets/assets/workspaces/extensions/read_only_mode/html/read_only_dialog.html-a505e6731a4f544f14e3d7506643955e.js"],function(e){var r,t,a,s,n,o,i;return a=require("widgets/Dialogs"),r=require("command/CommandManager"),t=require("command/Commands"),n=require("file/NativeFileError"),s=require("workspace-editor/project/ErrorHandler"),o=require("workspace-editor/workspace/Workspace"),i=function(){var s,n,i,c;return i=Mustache.render(e,o.getMetadata()),s=a.showModalDialogUsingTemplate(i),n=s.getElement(),c=n.find("#workspace-title-input"),s.done(function(e){return e===a.DIALOG_BTN_OK?r.execute(t.FORK_WORKSPACE,c.val(),o.getMetadata().id):void 0})},s.registerHandlerForError(n.NO_MODIFICATION_ALLOWED_ERR,i)})}.call(this),function(){require(["https://wac.A8B5.edgecastcdn.net/80A8B5/static-assets/assets/workspaces/extensions/total_size_limit/html/size_limit_reached_dialog.html-231147a4d5bceb7ae0f3d48f3c99bed1.js"],function(e){var r,t,a,s,n,o,i,c,d,u,l;return r=require("utils/AppInit"),s=require("widgets/Dialogs"),t=require("command/CommandManager"),a=require("command/Commands"),o=require("file/NativeFileError"),n=require("workspace-editor/project/ErrorHandler"),d=require("workspace-editor/utils/filesize.min"),i=52428800,c={base:2,round:1},l=function(){var r;return r=Mustache.render(e,{sizeLimit:u(i),currentSize:u(brackets.fs.driver.currentFSSize)}),s.showModalDialogUsingTemplate(r)},n.registerHandlerForError(o.QUOTA_EXCEEDED_ERR,l),u=function(e){return d(e,c)},r.htmlReady(function(){return brackets.fs.driver.setMaxFSSize(i)})})}.call(this);